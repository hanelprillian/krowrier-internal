(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/J2g":function(t,a,s){"use strict";s.r(a);var e=s("o0o1"),r=s.n(e);function i(t,a,s,e,r,i,n){try{var o=t[i](n),c=o.value}catch(t){return void s(t)}o.done?a(c):Promise.resolve(c).then(e,r)}function n(t){return function(){var a=this,s=arguments;return new Promise(function(e,r){var n=t.apply(a,s);function o(t){i(n,e,r,o,c,"next",t)}function c(t){i(n,e,r,o,c,"throw",t)}o(void 0)})}}var o={data:function(){return{dataLoaded:!1,dataUserLoaded:!1,data:{status:"",consignee_name:"",destination_address:"",destination_feeder_id:"",origin_drop_point_id:"",origin_feeder_id:"",pickup_address:"",destination_drop_point_id:"",code_booking:"",booking_id:"",created_at:""},dataProgress:{data:[]}}},props:["mode"],methods:{FetchData:function(){var t=n(r.a.mark(function t(a){var s,e=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,db.collection("booking").doc(a);case 2:return s=t.sent,t.next=5,s.get().then(function(){var t=n(r.a.mark(function t(a){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.exists){t.next=12;break}return t.next=3,a.data();case 3:(s=t.sent).booking_id=a.id,s.created_at=moment(s.created_at).format("DD MMMM YYYY, HH mm"),e.data=Object.assign(s,{service_package:null,user:null,feeder_origin:null,feeder_origin_user:null,courier:null,courier_user:null,feeder_destination:null,feeder_destination_user:null}),e.dataLoaded=!0,""!=s.service_package_id&&void 0!==s.service_package_id&&db.collection("service_package").doc(s.service_package_id).get().then(function(){var t=n(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.exists){t.next=4;break}return t.next=3,a.data();case 3:e.data.service_package=t.sent;case 4:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}()),""!=s.user_id&&void 0!==s.user_id&&db.collection("user").doc(s.user_id).get().then(function(){var t=n(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.exists){t.next=4;break}return t.next=3,a.data();case 3:e.data.user=t.sent;case 4:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}()),t.next=13;break;case 12:e.$router.push("/internal/booking");case 13:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}(),loadProgress:function(){var t=n(r.a.mark(function t(){var a,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=this).dataProgress.data=[],swal.fire({title:"Loading Progress...",text:"Please waiting",allowOutsideClick:!1,allowEscapeKey:!1,onOpen:function(){swal.showLoading()}}),s=[],t.next=6,db.collection("booking_progress").where("booking_id","==",a.data.booking_id).orderBy("unix_time","desc").get().then(function(t){if(t.size>0){var e=t.size;t.forEach(function(){var t=n(r.a.mark(function t(a){var i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(i=a.data()).id=a.id,i.seq=e,i.feeder={},i.courier={},i.drop_point={},i.status_name_formatted=func.toTitleCase(i.status_name),i.datetime_formatted=moment(i.datetime).format("DD MMMM YYYY, HH mm"),"Feeder"===i.status_name&&""!=i.role_firebase_id&&void 0!==i.role_firebase_id&&db.collection("feeder").doc(i.role_firebase_id).get().then(function(){var t=n(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.feeder=a.data();case 1:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}()),"Courier"===i.status_name&&""!=i.role_firebase_id&&void 0!==i.role_firebase_id&&db.collection("courier").doc(i.role_firebase_id).get().then(function(){var t=n(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.courier=a.data();case 1:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}()),"Drop Point"===i.status_name&&""!=i.role_firebase_id&&void 0!==i.role_firebase_id&&db.collection("drop_point").doc(i.role_firebase_id).get().then(function(){var t=n(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.drop_point=a.data();case 1:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}()),s.push(i),e--;case 13:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}())}a.dataProgress.data=s,console.log(a.dataProgress.data),swal.close()}).catch(function(t){console.log(t),swal.close()});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),currency:function(t){var a=0;return t&&(a=func.currency_number(t)),a}},mounted:function(){var t=n(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("edit"!=(a=this).mode||!a.$route.params.id){t.next=4;break}return t.next=4,a.FetchData(a.$route.params.id);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},c=s("KHd+"),l=Object(c.a)(o,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"d-flex align-items-center"},[s("h2",{staticClass:"page-header-title"},[t._v(t._s("add"==t.mode?"New":"Detail")+" Booking")]),t._v(" "),s("div",[s("div",{staticClass:"page-header-tools"},[0==t.data.status?s("small",{staticClass:"badge-text info badge-text-small"},[t._v("Progress")]):t._e(),t._v(" "),1==t.data.status?s("small",{staticClass:"badge-text success badge-text-small"},[t._v("Complete")]):t._e()])])]),t._v(" "),s("br"),t._v(" "),s("div",[s("button",{staticClass:"btn btn-outline-secondary",on:{click:function(a){return t.$router.push("/internal/booking")}}},[t._v("Back")])])])]),t._v(" "),s("ul",{staticClass:"nav nav-tabs",attrs:{id:"example-one",role:"tablist"}},[t._m(0),t._v(" "),s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",attrs:{id:"base-tab-2","data-toggle":"tab",href:"#tab-2",role:"tab","aria-controls":"tab-2","aria-selected":"false"},on:{click:function(a){return a.preventDefault(),t.loadProgress()}}},[t._v("Progress")])])]),t._v(" "),s("div",{staticClass:"clearfix"}),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"tab-content pt-3"},[s("div",{staticClass:"tab-pane fade show active",attrs:{id:"tab-1",role:"tabpanel","aria-labelledby":"base-tab-1"}},[s("div",{staticClass:"row flex-row"},[s("div",{staticClass:"col-xl-12"},[s("div",{staticClass:"widget widget-default"},[s("div",{staticClass:"widget-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-control-label"},[t._v("Booking Number")]),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v(t._s(t.dataLoaded?t.data.code_booking:"Loading..."))])])]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-control-label"},[t._v("Date")]),t._v(" "),s("p",{staticClass:"form-control-static"},[s("span",[t._v(t._s(t.data.created_at))])])])])])])]),t._v(" "),s("div",{staticClass:"widget widget-default"},[s("div",{staticClass:"widget-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"form-group"},[t._m(1),t._v(" "),s("div",{staticClass:"form-control-static"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-control-label"},[t._v("Name")]),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v(t._s(t.data.user?t.data.user.name:""))])])]),t._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-control-label"},[t._v("Phone")]),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v(t._s(t.data.user?t.data.user.phone:""))])])]),t._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-control-label"},[t._v("Pickup Address")]),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v(t._s(t.data.pickup_address))])])])])])])]),t._v(" "),t._m(2),t._v(" "),s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"form-group"},[t._m(3),t._v(" "),s("div",{staticClass:"form-control-static"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-control-label"},[t._v("Name")]),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v(t._s(t.data.consignee_name))])])]),t._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-control-label"},[t._v("Destination Address")]),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v(t._s(t.data.destination_address))])])])])])])])])])]),t._v(" "),s("div",{staticClass:"widget"},[s("div",{staticClass:"widget-body"},[s("div",{staticClass:"form-group"},[t._m(4),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"form-control-static"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-control-label"},[t._v("Service Package")]),t._v(" "),s("div",{staticClass:"form-control-static"},[t._v(t._s(t.data.service_package?t.data.service_package.name:"-"))])])])])]),t._v(" "),s("hr"),t._v(" "),t.data.items_loading?s("div",{staticClass:"text-grey-dark"},[t._v("Loading Items....")]):t._e(),t._v(" "),t.data.goods_name&&""!=t.data.goods_name?t._e():s("div",{staticClass:"alert alert-warning"},[t._v("No Item")]),t._v(" "),t.data.goods_name?s("div",[s("div",{staticClass:"col-md-12"},[t._m(5),t._v(" "),s("br"),t._v(" "),s("div",[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-control-label"},[t._v("Item")]),t._v(" "),s("div",{staticClass:"form-control-static"},[t._v("\n                                                        "+t._s(t.data.goods_name)+"\n                                                        "),s("br"),t._v(" "),s("br"),t._v(" "),s("small",[s("strong",[t._v("Weight:")]),t._v("\n                                                            "+t._s(t.data.goods_weight)+" Kg  \n                                                            "),s("strong",[t._v("Qty:")]),t._v("\n                                                            "+t._s(t.data.goods_quantity)+"  \n                                                        ")])])])])]),t._v(" "),s("div",{staticClass:"clearfix"}),t._v(" "),s("hr")]):t._e()])])]),t._v(" "),s("div",{staticClass:"widget"},[s("table",{staticClass:"table table-compact"},[s("tbody",[s("tr",[t._m(6),t._v(" "),s("td",{attrs:{width:"20%"}},[s("h4",[s("strong",[t._v("Rp. "+t._s(t.currency(t.data.total_charges)))])])])])])])])])])]),t._v(" "),s("div",{staticClass:"tab-pane fade",attrs:{id:"tab-2",role:"tabpanel","aria-labelledby":"base-tab-2"}},[s("ul",{staticClass:"list-group w-100"},t._l(t.dataProgress.data,function(a,e){return s("li",{staticClass:"list-group-item"},[s("div",{staticClass:"other-message"},[s("div",{staticClass:"media"},[s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",{attrs:{width:"10%"}},[s("strong",{staticStyle:{"font-size":"15pt"}},[t._v("#"+t._s(a.seq))])]),t._v(" "),s("td",{attrs:{width:"90%"}},[s("div",{staticClass:"media-body align-self-center"},[s("div",{staticClass:"other-message-sender margin-bottom-5"},[s("strong",{staticClass:"text-blue",staticStyle:{"font-size":"12pt"}},[t._v(t._s(a.status_name_formatted))]),t._v(" "),s("br"),t._v(" "),s("small",[t._v(t._s(a.datetime_formatted))])]),t._v(" "),s("div",{staticClass:"other-message-time padding-top-10"},["Feeder"===a.status_name?s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3"},[t._m(7,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.feeder&&a.feeder.feeder_id?a.feeder.feeder_id:"-")+"\n                                                            ")])]),t._v(" "),s("div",{staticClass:"col-md-3"},[t._m(8,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.feeder&&a.feeder.fullname?a.feeder.fullname:"-")+"\n                                                            ")])]),t._v(" "),s("div",{staticClass:"col-md-3"},[t._m(9,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.feeder&&a.feeder.phone?a.feeder.phone:"-")+"\n                                                            ")])]),t._v(" "),s("div",{staticClass:"col-md-3"},[t._m(10,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[a.feeder?s("span",[t._v("\n                                                                    "+t._s(a.feeder.vehicle_name)+" "),s("small",[t._v("("+t._s(a.feeder.vehicle_police_number)+")")])]):t._e()])])]):t._e(),t._v(" "),"Courier"===a.status_name?s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3"},[t._m(11,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.courier&&a.courier.courier_id?a.courier.courier_id:"-")+"\n                                                            ")])]),t._v(" "),s("div",{staticClass:"col-md-3"},[t._m(12,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.courier&&a.courier.fullname?a.courier.fullname:"-")+"\n                                                            ")])]),t._v(" "),s("div",{staticClass:"col-md-3"},[t._m(13,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.courier&&a.courier.phone?a.courier.phone:"-")+"\n                                                            ")])])]):t._e(),t._v(" "),"Drop Point"===a.status_name?s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3"},[t._m(14,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.drop_point&&a.drop_point.droppoint_id?a.drop_point.droppoint_id:"-")+"\n                                                            ")])]),t._v(" "),s("div",{staticClass:"col-md-3"},[t._m(15,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.drop_point&&a.drop_point.name?a.drop_point.name:"-")+"\n                                                                "),s("br"),t._v(" "),s("small",[t._v("\n                                                                    Owner:\n                                                                    "),s("strong",[t._v("\n                                                                        "+t._s(a.drop_point&&a.drop_point.owner_name?a.drop_point.owner_name:"-")+"\n                                                                    ")])])])]),t._v(" "),s("div",{staticClass:"col-md-3"},[t._m(16,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.drop_point&&a.drop_point.phone?a.drop_point.phone:"-")+"\n                                                            ")])]),t._v(" "),s("div",{staticClass:"col-md-3"},[t._m(17,!0),t._v(" "),s("p",{staticClass:"form-control-static"},[t._v("\n                                                                "+t._s(a.drop_point&&a.drop_point.address?a.drop_point.address:"-")+"\n                                                            ")])])]):t._e()])])])])])])])])])}),0)])])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{id:"base-tab-1","data-toggle":"tab",href:"#tab-1",role:"tab","aria-controls":"tab-1","aria-selected":"true"}},[this._v("General")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",[a("span",[this._v("Customer")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-md-1"},[a("i",{staticClass:"fas fa-arrow-right",staticStyle:{"margin-top":"50%","font-size":"13pt"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",[a("span",[this._v("Receiver")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",[a("span",[this._v("Booking Item")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"form-group"},[a("span",{staticStyle:{"font-size":"12pt"}},[this._v("\n\t\t\t\t\t\t\t\t\t\t\tBooking Item\n\t\t\t\t\t\t\t\t\t\t\t"),a("strong",[this._v("#1")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("th",{attrs:{width:"80%"}},[a("h4",{staticClass:"text-right"},[this._v("Total Charges")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("ID")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("Name")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("Phone")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("Vehicle")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("ID")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("Name")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("Phone")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("ID")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("Name")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("Phone")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("label",{attrs:{for:""}},[a("small",[a("strong",[this._v("Address")])])])}],!1,null,null,null);a.default=l.exports}}]);