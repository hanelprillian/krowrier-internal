(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{dXS3:function(t,e,a){"use strict";a.r(e);var s=a("o0o1"),r=a.n(s);function n(t,e,a,s,r,n,i){try{var o=t[n](i),d=o.value}catch(t){return void a(t)}o.done?e(d):Promise.resolve(d).then(s,r)}function i(t){return function(){var e=this,a=arguments;return new Promise(function(s,r){var i=t.apply(e,a);function o(t){n(i,s,r,o,d,"next",t)}function d(t){n(i,s,r,o,d,"throw",t)}o(void 0)})}}var o={data:function(){return{dataLoaded:!1,dataUserLoaded:!1,data:{user:{user_id:"",email:"",name:"",identity_type:"",identity_number:"",gender:"",phone:"",birth:"",status:"",address:""}},listIdentityType:[{label:"KTP",value:"KTP"}]}},props:["mode"],components:{Datepicker:a("+jP+").a},watch:{"data.user.birth":function(){this.data.user.birth=moment(this.data.user.birth).format("YYYY-MM-DD")}},methods:{FetchData:function(){var t=i(r.a.mark(function t(e){var a=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,db.collection("customer").doc(e);case 2:t.sent.get().then(function(){var t=i(r.a.mark(function t(e){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.exists){t.next=13;break}return t.next=3,e.data();case 3:if(s=t.sent,a.data=Object.assign(s,{user:{user_id:"",email:"",name:"",identity_type:"",identity_number:"",gender:"",phone:"",birth:"",status:"",address:""}}),a.dataLoaded=!0,a.data.user.user_id=s.user_id,""==s.user_id||void 0===s.user_id){t.next=10;break}return t.next=10,db.collection("user").doc(s.user_id).get().then(function(){var t=i(r.a.mark(function t(e){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.exists){t.next=13;break}return t.next=3,e.data();case 3:s=t.sent,a.data.user.email=s.email||"",a.data.user.name=s.name||"",a.data.user.identity_type=s.identity_type||"",a.data.user.identity_number=s.identity_number||"",a.data.user.gender=s.gender||"",a.data.user.address=s.address||"",a.data.user.birth=s.birth||"",a.data.user.phone=s.phone||"",a.data.user.status=s.status||"";case 13:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 10:console.log(a.data.user),t.next=14;break;case 13:a.$router.push("/internal/customer");case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),Submit:function(){var t=this,e=db.collection("user"),a={identity_type:this.data.user.identity_type,identity_number:this.data.user.identity_number,phone:this.data.user.phone,birth:this.data.user.birth,gender:this.data.user.gender,address:this.data.user.address,status:1},s="add";"edit"==t.mode&&t.$route.params.id?(e=db.collection("user").doc(this.data.user.user_id),s="update",a=Object.assign(a,{updated_at:moment().valueOf()})):a=Object.assign(a,{created_at:moment().valueOf(),updated_at:moment().valueOf()}),swal.fire({title:"Saving...",text:"Please waiting",allowOutsideClick:!1,allowEscapeKey:!1,onOpen:function(){swal.showLoading()}}),e[s](a).then(function(e){swal.fire({title:"Saved",text:"Your data saved",type:"success",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}).then(function(){t.$router.push("/internal/customer")})}).catch(function(t){swal.fire({title:"Error",text:"Your data not saved saved",type:"erorr"}),console.error("Error adding document: ",t)})}},mounted:function(){var t=i(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,$(".selectpicker").selectpicker(),"edit"!=e.mode||!e.$route.params.id){t.next=5;break}return t.next=5,e.FetchData(e.$route.params.id);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updated:function(){$(".selectpicker").selectpicker("refresh")}},d=a("KHd+"),u=Object(d.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"page-header"},[a("div",{staticClass:"d-flex align-items-center"},[a("h2",{staticClass:"page-header-title"},[t._v(t._s("add"==t.mode?"New":"Detail")+" Customer")]),t._v(" "),a("div",[a("div",{staticClass:"page-header-tools"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"btn-group mr-1 mb-2"},[1==t.data.user.status?a("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button"}},[t._v("Active")]):t._e(),t._v(" "),0==t.data.user.status?a("button",{staticClass:"btn btn-sm btn-warning",attrs:{type:"button"}},[t._v("Pending")]):t._e(),t._v(" "),2==t.data.user.status?a("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"}},[t._v("Suspended")]):t._e(),t._v(" "),a("a",{staticClass:"btn btn-sm dropdown-toggle d-flex align-items-center",class:{"btn-success":1==t.data.user.status,"btn-danger":2==t.data.user.status,"btn-warning":0==t.data.user.status},attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"la la-angle-down mr-0"})]),t._v(" "),t._m(0)])]),t._v(" "),a("div",{staticClass:"clearfix"})])])]),t._v(" "),a("br"),t._v(" "),a("div",[a("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.$router.push("/internal/customer")}}},[t._v("Back")]),t._v(" "),a("button",{staticClass:"btn btn-outline-primary float-right",on:{click:t.Submit}},[t._v("Save")])])])]),t._v(" "),a("div",{staticClass:"row flex-row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"widget has-shadow"},[t._m(1),t._v(" "),a("div",{staticClass:"widget-body"},[a("form",{staticClass:"form-horizontal"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group align-items-center mb-5"},[a("label",{staticClass:"form-control-label"},[t._v("Email")]),t._v(" "),a("p",{staticClass:"form-control-static"},[t._v(t._s(t.data.user?t.data.user.email:"-"))])])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group align-items-center mb-5"},[a("label",{staticClass:"form-control-label"},[t._v("User")]),t._v(" "),a("p",{staticClass:"form-control-static"},[t._v(t._s(t.data.user?t.data.user.name:"-"))])])])]),t._v(" "),a("hr"),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group align-items-center mb-5"},[a("label",{staticClass:"form-control-label"},[t._v("Phone")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.user.phone,expression:"data.user.phone"}],staticClass:"form-control",attrs:{type:"text",value:"",placeholder:"Phone"},domProps:{value:t.data.user.phone},on:{input:function(e){e.target.composing||t.$set(t.data.user,"phone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group align-items-center mb-5"},[a("label",{staticClass:"form-control-label"},[t._v("Birth")]),t._v(" "),a("datepicker",{attrs:{format:"dd/MM/yyyy","input-class":"form-control"},model:{value:t.data.user.birth,callback:function(e){t.$set(t.data.user,"birth",e)},expression:"data.user.birth"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group align-items-center mb-5"},[a("label",{staticClass:"form-control-label"},[t._v("Gender")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.user.gender,expression:"data.user.gender"}],staticClass:"selectpicker form-control",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.data.user,"gender",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"M"}},[t._v("Male")]),t._v(" "),a("option",{attrs:{value:"F"}},[t._v("Female")])])]),t._v(" "),a("div",{staticClass:"form-group align-items-center mb-5"},[a("label",{staticClass:"form-control-label"},[t._v("Address")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.user.address,expression:"data.user.address"}],staticClass:"form-control",attrs:{name:"",id:"",placeholder:"Address",rows:"5"},domProps:{value:t.data.user.address},on:{input:function(e){e.target.composing||t.$set(t.data.user,"address",e.target.value)}}})])])])])])])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dropdown-menu"},[e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Suspend")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"widget-header"},[e("span",[this._v("Customer Information")])])}],!1,null,null,null);e.default=u.exports}}]);