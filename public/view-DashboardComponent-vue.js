(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"8wMy":function(t,e,a){"use strict";a.r(e);var r=a("o0o1"),o=a.n(r),i=a("EyHm"),s=a.n(i);a("AuhY");function n(t,e,a,r,o,i,s){try{var n=t[i](s),d=n.value}catch(t){return void a(t)}n.done?e(d):Promise.resolve(d).then(r,o)}function d(t){return function(){var e=this,a=arguments;return new Promise(function(r,o){var i=t.apply(e,a);function s(t){n(i,r,o,s,d,"next",t)}function d(t){n(i,r,o,s,d,"throw",t)}s(void 0)})}}var c={components:{Datepicker:a("+jP+").a,VueApexCharts:s.a},data:function(){return{totalBookingChartOptions:{chart:{events:{dataPointSelection:function(t,e,a){console.log(e,a)}}},xaxis:{categories:[]},colors:["#002BFE"]},totalBookingChartSeries:[{name:"Total",data:[0]}],growthRateTotalBookingChartOptions:{chart:{events:{dataPointSelection:function(t,e,a){console.log(e,a)}}},xaxis:{categories:[]},yaxis:{labels:{formatter:function(t){return func.currency_number(t)+" %"}}},colors:["#3884fe"]},growthRateTotalBookingChartSeries:[{name:"Total",data:[0]}],chargesBookingChartOptions:{chart:{events:{dataPointSelection:function(t,e,a){console.log(e,a)}}},xaxis:{categories:[]},yaxis:{labels:{formatter:function(t){return"Rp. "+func.currency_number(t)}}},colors:["#83ac3d"]},chargesBookingChartSeries:[{name:"Charges",data:[0]}],growthRateChargesBookingChartOptions:{chart:{events:{dataPointSelection:function(t,e,a){console.log(e,a)}}},xaxis:{categories:[]},yaxis:{labels:{formatter:function(t){return func.currency_number(t)+" %"}}},colors:["#848527"]},growthRateChargesBookingChartSeries:[{name:"Total",data:[0]}],filter_dashboard:{method:"current_year",selected_year:moment().format("YYYY"),_selected_year_formatted:moment().format("YYYY"),from_month:moment().format("YYYY/MM"),_from_month_format:moment().format("MMMM YYYY"),to_month:moment().format("YYYY/MM"),_to_month_format:moment().format("MMMM YYYY"),selected_month:moment().format("YYYY/MM"),_selected_month_format:moment().format("MMMM YYYY"),from_date:moment().format("YYYY/MM/DD"),_from_date_format:moment().format("DD MMMM YYYY"),to_date:moment().format("YYYY/MM/DD"),_to_date_format:moment().format("DD MMMM YYYY"),current_year:moment().format("YYYY")},total_data:{users:{data:0,loading:!0},drop_point:{data:0,loading:!0},bookings:{data:0,loading:!0},booking_charges:{data:0,loading:!0},customers:{data:0,loading:!0},couriers:{data:0,loading:!0}},recentFeeder:{data:[],loading:!0},recentCourier:{data:[],loading:!0}}},watch:{"filter_dashboard.selected_year":function(){""!=this.filter_dashboard.selected_year&&(this.filter_dashboard._selected_year_formatted=""!=this.filter_dashboard.selected_year?moment(this.filter_dashboard.selected_year).format("YYYY"):moment().format("YYYY"),this.getBookingStatisticsByMonth(this.filter_dashboard._selected_year_formatted),this.initCounter())},"filter_dashboard.method":function(){"current_year"==this.filter_dashboard.method?(this.filter_dashboard.selected_year=this.filter_dashboard.current_year,this.getBookingStatisticsByMonth(this.filter_dashboard.current_year),this.initCounter()):"by_month"==this.filter_dashboard.method?(this.getBookingStatisticsByDate(moment(this.filter_dashboard.selected_month).startOf("month").toDate(),moment(this.filter_dashboard.selected_month).endOf("month").toDate()),this.initCounter()):"date_range"==this.filter_dashboard.method&&(this.getBookingStatisticsByDate(),this.initCounter())},"filter_dashboard.selected_month":function(){this.filter_dashboard._selected_month_format=""!=this.filter_dashboard.selected_month?moment(this.filter_dashboard.selected_month).format("MMMM YYYY"):moment().format("MMMM YYYY"),"by_month"==this.filter_dashboard.method&&""!=this.filter_dashboard.selected_month&&(this.getBookingStatisticsByDate(moment(this.filter_dashboard.selected_month).startOf("month").toDate(),moment(this.filter_dashboard.selected_month).endOf("month").toDate()),this.initCounter())},"filter_dashboard.from_date":function(){this.filter_dashboard._from_date_format=""!=this.filter_dashboard.from_date?moment(this.filter_dashboard.from_date).format("DD MMMM YYYY"):moment().format("DD MMMM YYYY"),"date_range"==this.filter_dashboard.method&&""!=this.filter_dashboard.from_date&&""!=this.filter_dashboard.to_date&&(this.getBookingStatisticsByDate(),this.initCounter())},"filter_dashboard.to_date":function(){this.filter_dashboard._to_date_format=""!=this.filter_dashboard.to_date?moment(this.filter_dashboard.to_date).format("DD MMMM YYYY"):moment().format("DD MMMM YYYY"),"date_range"==this.filter_dashboard.method&&""!=this.filter_dashboard.from_date&&""!=this.filter_dashboard.to_date&&(this.getBookingStatisticsByDate(),this.initCounter())}},methods:{currency:function(t){var e=0;return t&&(e=func.currency_number(t)),e},refreshDashboardStatistic:function(){"current_year"==this.filter_dashboard.method?(this.filter_dashboard.selected_year=this.filter_dashboard.current_year,this.getBookingStatisticsByMonth(this.filter_dashboard.current_year),this.initCounter()):"date_range"==this.filter_dashboard.method&&(this.getBookingStatisticsByDate(),this.initCounter())},getRecentFeederRegistered:function(){var t=d(o.a.mark(function t(){var e=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:db.collection("feeder").where("active","==",0).limit(10).onSnapshot(function(){var t=d(o.a.mark(function t(a){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.empty){t.next=4;break}return e.recentFeeder.data=[],e.recentFeeder.loading=!1,t.abrupt("return");case 4:a.forEach(function(){var t=d(o.a.mark(function t(a){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((r=a.data()).id=a.id,""==r.user_id||void 0===r.user_id){t.next=5;break}return t.next=5,db.collection("user").doc(r.user_id).get().then(function(t){t.exists&&(r.user=t.data())});case 5:e.recentFeeder.data.push(r);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),e.recentFeeder.loading=!1;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getRecentCourierRegistered:function(){var t=d(o.a.mark(function t(){var e=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:db.collection("courier").where("active","==",0).limit(10).onSnapshot(function(){var t=d(o.a.mark(function t(a){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.empty){t.next=4;break}return e.recentCourier.data=[],e.recentCourier.loading=!1,t.abrupt("return");case 4:a.forEach(function(){var t=d(o.a.mark(function t(a){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((r=a.data()).id=a.id,""==r.user_id||void 0===r.user_id){t.next=5;break}return t.next=5,db.collection("user").doc(r.user_id).get().then(function(t){t.exists&&(r.user=t.data())});case 5:e.recentCourier.data.push(r);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),e.recentCourier.loading=!1;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),initCounter:function(){var t=d(o.a.mark(function t(){var e,a,r,i,s,n,c,l,h,_,m,u,f,v,g,b,p=this;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,this.total_data.users.loading=!0,db.collection("user").get().then(function(t){p.total_data.users.data=t.size,p.total_data.users.loading=!1}),this.total_data.drop_point.loading=!0,a=db.collection("drop_point").where("create_unix_time",">=",moment(this.filter_dashboard.current_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.current_year.toString()).endOf("year").valueOf()),"by_year"==e.filter_dashboard.method?a=db.collection("drop_point").where("create_unix_time",">=",moment(this.filter_dashboard.selected_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.selected_year.toString()).endOf("year").valueOf()):"by_month"==e.filter_dashboard.method?a=db.collection("drop_point").where("create_unix_time",">=",moment(this.filter_dashboard.from_month.toString()).startOf("month").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.to_month.toString()).endOf("month").valueOf()):"date_range"==e.filter_dashboard.method&&((r=new Date(this.filter_dashboard.from_date.toString())).setHours(0,0,0,0),(i=new Date(this.filter_dashboard.to_date.toString())).setHours(23,59,59,999),a=db.collection("drop_point").where("create_unix_time",">=",r.valueOf()).where("create_unix_time","<=",i.valueOf())),a.get().then(function(t){p.total_data.drop_point.data=t.size,p.total_data.drop_point.loading=!1}),this.total_data.bookings.loading=!0,this.total_data.booking_charges.loading=!0,s=db.collection("booking").where("create_unix_time",">=",moment(this.filter_dashboard.current_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.current_year.toString()).endOf("year").valueOf()),"by_year"==e.filter_dashboard.method?s=db.collection("booking").where("create_unix_time",">=",moment(this.filter_dashboard.selected_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.selected_year.toString()).endOf("year").valueOf()):"by_month"==e.filter_dashboard.method?s=db.collection("booking").where("create_unix_time",">=",moment(this.filter_dashboard.from_month.toString()).startOf("month").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.to_month.toString()).endOf("month").valueOf()):"date_range"==e.filter_dashboard.method&&((n=new Date(this.filter_dashboard.from_date.toString())).setHours(0,0,0,0),(c=new Date(this.filter_dashboard.to_date.toString())).setHours(23,59,59,999),s=db.collection("booking").where("create_unix_time",">=",n.valueOf()).where("create_unix_time","<=",c.valueOf())),(s=s.where("status","==",1)).get().then(function(t){p.total_data.bookings.data=t.size,p.total_data.bookings.loading=!1,e.total_data.booking_charges.data=0,t.forEach(function(t){var a=t.data();e.total_data.booking_charges.data+=a.total_charges}),e.total_data.booking_charges.loading=!1}),this.total_data.customers.loading=!0,l=db.collection("user").where("current_role","==","customer").where("create_unix_time",">=",moment(this.filter_dashboard.current_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.current_year.toString()).endOf("year").valueOf()),"by_year"==e.filter_dashboard.method?l=db.collection("user").where("current_role","==","customer").where("create_unix_time",">=",moment(this.filter_dashboard.selected_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.selected_year.toString()).endOf("year").valueOf()):"by_month"==e.filter_dashboard.method?l=db.collection("user").where("current_role","==","customer").where("create_unix_time",">=",moment(this.filter_dashboard.from_month.toString()).startOf("month").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.to_month.toString()).endOf("month").valueOf()):"date_range"==e.filter_dashboard.method&&((h=new Date(this.filter_dashboard.from_date.toString())).setHours(0,0,0,0),(_=new Date(this.filter_dashboard.to_date.toString())).setHours(23,59,59,999),l=db.collection("user").where("current_role","==","customer").where("create_unix_time",">=",h.valueOf()).where("create_unix_time","<=",_.valueOf())),l.onSnapshot(function(){var t=d(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:p.total_data.customers.data=e.size,p.total_data.customers.loading=!1;case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),this.total_data.couriers.loading=!0,m=db.collection("courier").where("create_unix_time",">=",moment(this.filter_dashboard.current_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.current_year.toString()).endOf("year").valueOf()),"by_year"==e.filter_dashboard.method?m=db.collection("courier").where("create_unix_time",">=",moment(this.filter_dashboard.selected_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.selected_year.toString()).endOf("year").valueOf()):"by_month"==e.filter_dashboard.method?m=db.collection("courier").where("create_unix_time",">=",moment(this.filter_dashboard.from_month.toString()).startOf("month").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.to_month.toString()).endOf("month").valueOf()):"date_range"==e.filter_dashboard.method&&((u=new Date(this.filter_dashboard.from_date.toString())).setHours(0,0,0,0),(f=new Date(this.filter_dashboard.to_date.toString())).setHours(23,59,59,999),m=db.collection("courier").where("create_unix_time",">=",u.valueOf()).where("create_unix_time","<=",f.valueOf())),m.onSnapshot(function(){var t=d(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:p.total_data.couriers.data=e.size;case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),v=db.collection("feeder").where("create_unix_time",">=",moment(this.filter_dashboard.current_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.current_year.toString()).endOf("year").valueOf()),"by_year"==e.filter_dashboard.method?v=db.collection("feeder").where("create_unix_time",">=",moment(this.filter_dashboard.selected_year.toString()).startOf("year").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.selected_year.toString()).endOf("year").valueOf()):"by_month"==e.filter_dashboard.method?v=db.collection("feeder").where("create_unix_time",">=",moment(this.filter_dashboard.from_month.toString()).startOf("month").valueOf()).where("create_unix_time","<=",moment(this.filter_dashboard.to_month.toString()).endOf("month").valueOf()):"date_range"==e.filter_dashboard.method&&((g=new Date(this.filter_dashboard.from_date.toString())).setHours(0,0,0,0),(b=new Date(this.filter_dashboard.to_date.toString())).setHours(23,59,59,999),v=db.collection("feeder").where("create_unix_time",">=",g.valueOf()).where("create_unix_time","<=",b.valueOf())),v.onSnapshot(function(){var t=d(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:p.total_data.couriers.data+=e.size,p.total_data.couriers.loading=!1;case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 24:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getBookingStatisticsByMonth:function(){var t=d(o.a.mark(function t(e){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=this,e=e||moment().format("YYYY"),a.loadTotalBookingChartByMonth(e),a.loadGrowthRateTotalBookingChartByMonth(e),a.loadChargesBookingChartByMonth(e),a.loadGrowthRateChargesBookingChartByMonth(e);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadTotalBookingChartByMonth:function(){var t=d(o.a.mark(function t(e){var a,r,i,s,n,c,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a=this,e=e||moment().format("YYYY"),r=moment(e.toString()).startOf("year"),i=moment(e.toString()).endOf("year"),s=[],n=[],c=function(){var t=l.format("MMM"),e=moment(l.format("YYYY-MM-DD")).startOf("month"),a=moment(l.format("YYYY-MM-DD")).endOf("month"),r=0;db.collection("booking").where("create_unix_time",">=",e.valueOf()).where("create_unix_time","<=",a.valueOf()).where("status","==",1).orderBy("create_unix_time","desc").get().then(function(){var t=d(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.size,n.push(r);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),s.push(t)},l=moment(r);l.isBefore(i);l.add(1,"months"))c();a.totalBookingChartSeries[0].data=n,a.totalBookingChartOptions={xaxis:{categories:s}};case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadGrowthRateTotalBookingChartByMonth:function(){var t=d(o.a.mark(function t(e){var a,r,i,s,n,c,l,h;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a=this,e=e||moment().format("YYYY"),r=moment(e.toString()).startOf("year"),i=moment(e.toString()).endOf("year"),s=[],n=[],0,c=0,l=function(){var t=h.format("MMM"),e=moment(h.format("YYYY-MM-DD")).startOf("month"),a=moment(h.format("YYYY-MM-DD")).endOf("month"),r=0;db.collection("booking").where("create_unix_time",">=",e.valueOf()).where("create_unix_time","<=",a.valueOf()).where("status","==",1).orderBy("create_unix_time","desc").get().then(function(){var t=d(o.a.mark(function t(e){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.size,a=c>0&&r>0?(r-c)/c*100:0,r>0&&(c=r),n.push(Math.round(a));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),s.push(t),0},h=moment(r);h.isBefore(i);h.add(1,"months"))l();a.growthRateTotalBookingChartSeries[0].data=n,a.growthRateTotalBookingChartOptions={xaxis:{categories:s}};case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadChargesBookingChartByMonth:function(){var t=d(o.a.mark(function t(e){var a,r,i,s,n,c,l,h,_;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a=this,e=e||moment().format("YYYY"),r=moment(e.toString()).startOf("year"),i=moment(e.toString()).endOf("year"),s=[],n=[],c=moment(r);c.isBefore(i);c.add(1,"months"))l=c.format("MMM"),h=moment(c.format("YYYY-MM-DD")).startOf("month"),_=moment(c.format("YYYY-MM-DD")).endOf("month"),0,db.collection("booking").where("create_unix_time",">=",h.valueOf()).where("create_unix_time","<=",_.valueOf()).where("status","==",1).orderBy("create_unix_time","desc").get().then(function(){var t=d(o.a.mark(function t(e){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.size,a=0,t.next=4,e.forEach(function(t){var e=t.data();a+=e.total_charges});case 4:n.push(a);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),s.push(l);a.chargesBookingChartSeries[0].data=n,a.chargesBookingChartOptions={xaxis:{categories:s}};case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadGrowthRateChargesBookingChartByMonth:function(){var t=d(o.a.mark(function t(e){var a,r,i,s,n,c,l,h,_,m;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a=this,e=e||moment().format("YYYY"),r=moment(e.toString()).startOf("year"),i=moment(e.toString()).endOf("year"),s=[],n=[],0,c=0,l=moment(r);l.isBefore(i);l.add(1,"months"))h=l.format("MMM"),_=moment(l.format("YYYY-MM-DD")).startOf("month"),m=moment(l.format("YYYY-MM-DD")).endOf("month"),0,db.collection("booking").where("create_unix_time",">=",_.valueOf()).where("create_unix_time","<=",m.valueOf()).where("status","==",1).orderBy("create_unix_time","desc").get().then(function(){var t=d(o.a.mark(function t(e){var a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=0,t.next=3,e.forEach(function(t){var e=t.data();a+=e.total_charges});case 3:r=c>0&&a>0?(a-c)/c*100:0,a>0&&(c=a),n.push(Math.round(r));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),s.push(h),0;a.growthRateChargesBookingChartSeries[0].data=n,a.growthRateChargesBookingChartOptions={xaxis:{categories:s}};case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getBookingStatisticsByDate:function(){var t=d(o.a.mark(function t(e,a){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this,e=e||moment(this.filter_dashboard.from_date),a=a||moment(this.filter_dashboard.to_date),r.loadTotalBookingChartByDate(e,a),r.loadChargesBookingChartByDate(e,a),r.loadGrowthRateTotalBookingChartByDate(e,a),r.loadGrowthRateChargesBookingChartByDate(e,a);case 7:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),loadTotalBookingChartByDate:function(){var t=d(o.a.mark(function t(e,a){var r,i,s,n,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=this,e=e||moment(this.filter_dashboard.from_date),a=a||moment(this.filter_dashboard.to_date),i=[],s=[],n=function(){var t=c.format("DD MMMM YYYY"),e=new Date(c.format("YYYY-MM-DD"));e.setHours(0,0,0,0);var a=new Date(c.format("YYYY-MM-DD"));a.setHours(23,59,59,999);var r=0;db.collection("booking").where("create_unix_time",">=",e.valueOf()).where("create_unix_time","<=",a.valueOf()).where("status","==",1).orderBy("create_unix_time","desc").get().then(function(){var t=d(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.size,s.push(r);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),i.push(t)},c=moment(e);c.diff(a,"days")<=0;c.add(1,"days"))n();r.totalBookingChartSeries[0].data=s,r.totalBookingChartOptions={xaxis:{categories:i}};case 9:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),loadGrowthRateTotalBookingChartByDate:function(){var t=d(o.a.mark(function t(e,a){var r,i,s,n,c,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=this,e=e||moment(this.filter_dashboard.from_date),a=a||moment(this.filter_dashboard.to_date),i=[],s=[],0,n=0,c=function(){var t=l.format("DD MMMM YYYY"),e=new Date(l.format("YYYY-MM-DD"));e.setHours(0,0,0,0);var a=new Date(l.format("YYYY-MM-DD"));a.setHours(23,59,59,999);var r=0;db.collection("booking").where("create_unix_time",">=",e.valueOf()).where("create_unix_time","<=",a.valueOf()).where("status","==",1).orderBy("create_unix_time","desc").get().then(function(){var t=d(o.a.mark(function t(e){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.size,a=n>0&&r>0?(r-n)/n*100:0,r>0&&(n=r),s.push(Math.round(a));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),i.push(t),0},l=moment(e);l.diff(a,"days")<=0;l.add(1,"days"))c();r.growthRateTotalBookingChartSeries[0].data=s,r.growthRateTotalBookingChartOptions={xaxis:{categories:i}};case 11:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),loadChargesBookingChartByDate:function(){var t=d(o.a.mark(function t(e,a){var r,i,s,n,c,l,h;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=this,e=e||moment(this.filter_dashboard.from_date),a=a||moment(this.filter_dashboard.to_date),i=[],s=[],n=moment(e);n.diff(a,"days")<=0;n.add(1,"days"))c=n.format("DD MMMM YYYY"),(l=new Date(n.format("YYYY-MM-DD"))).setHours(0,0,0,0),(h=new Date(n.format("YYYY-MM-DD"))).setHours(23,59,59,999),0,db.collection("booking").where("create_unix_time",">=",l.valueOf()).where("create_unix_time","<=",h.valueOf()).where("status","==",1).orderBy("create_unix_time","desc").get().then(function(){var t=d(o.a.mark(function t(e){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.size,a=0,t.next=4,e.forEach(function(t){var e=t.data();a+=e.total_charges});case 4:s.push(a);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),i.push(c);r.chargesBookingChartSeries[0].data=s,r.chargesBookingChartOptions={xaxis:{categories:i}};case 8:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),loadGrowthRateChargesBookingChartByDate:function(){var t=d(o.a.mark(function t(e,a){var r,i,s,n,c,l,h,_;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=this,e=e||moment(this.filter_dashboard.from_date),a=a||moment(this.filter_dashboard.to_date),i=[],s=[],0,n=0,c=moment(e);c.diff(a,"days")<=0;c.add(1,"days"))l=c.format("DD MMMM YYYY"),(h=new Date(c.format("YYYY-MM-DD"))).setHours(0,0,0,0),(_=new Date(c.format("YYYY-MM-DD"))).setHours(23,59,59,999),0,db.collection("booking").where("create_unix_time",">=",h.valueOf()).where("create_unix_time","<=",_.valueOf()).where("status","==",1).orderBy("create_unix_time","desc").get().then(function(){var t=d(o.a.mark(function t(e){var a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=0,t.next=3,e.forEach(function(t){var e=t.data();a+=e.total_charges});case 3:r=n>0&&a>0?(a-n)/n*100:0,a>0&&(n=a),s.push(Math.round(r));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),i.push(l),0;r.growthRateChargesBookingChartSeries[0].data=s,r.growthRateChargesBookingChartOptions={xaxis:{categories:i}};case 10:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()},mounted:function(){var t=d(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:$(".formSelect").selectpicker(),this.initCounter(),this.getRecentFeederRegistered(),this.getRecentCourierRegistered(),this.getBookingStatisticsByMonth(this.filter_dashboard.current_year);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updated:function(){$(".formSelect").selectpicker("refresh")}},l=a("KHd+"),h=Object(l.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"page-header"},[a("div",{staticClass:"d-flex align-items-center"},[a("h2",{staticClass:"page-header-title"},[t._v("\n                    Dashboard |\n                    "),"current_year"==t.filter_dashboard.method||"by_year"==t.filter_dashboard.method?a("small",[t._v(t._s(t.filter_dashboard._selected_year_formatted))]):t._e(),t._v(" "),"by_month"==t.filter_dashboard.method?a("small",[t._v(t._s(t.filter_dashboard._selected_month_format)+" ")]):t._e(),t._v(" "),"date_range"==t.filter_dashboard.method?a("small",[t._v(t._s(t.filter_dashboard._from_date_format)+" "),a("small",[t._v("to")]),t._v(" "+t._s(t.filter_dashboard._to_date_format))]):t._e()]),t._v(" "),t._m(0)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"collapse collapsed",attrs:{id:"filterSection"}},[a("div",{staticClass:"widget has-shadow"},[t._m(1),t._v(" "),a("div",{staticClass:"widget-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-3 col-md-3 col-sm-3 col-xs-3"},[a("div",{staticClass:"form-group"},[t._m(2),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_dashboard.method,expression:"filter_dashboard.method"}],staticClass:"form-control formSelect btn-sm no-margin",attrs:{name:"",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.filter_dashboard,"method",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"current_year"}},[t._v("Current Year ("+t._s(t.filter_dashboard.current_year)+")")]),t._v(" "),a("option",{attrs:{value:"by_year"}},[t._v("By Year")]),t._v(" "),a("option",{attrs:{value:"by_month"}},[t._v("By Month")]),t._v(" "),a("option",{attrs:{value:"date_range"}},[t._v("By Date")])])])]),t._v(" "),"by_year"==t.filter_dashboard.method?a("div",{staticClass:"col-lg-2 col-md-2 col-sm-2"},[a("div",{staticClass:"form-group"},[t._m(3),t._v(" "),a("datepicker",{attrs:{minimumView:"year",maximumView:"year","input-class":"form-control",format:"yyyy"},model:{value:t.filter_dashboard.selected_year,callback:function(e){t.$set(t.filter_dashboard,"selected_year",e)},expression:"filter_dashboard.selected_year"}})],1)]):t._e(),t._v(" "),"by_month"==t.filter_dashboard.method?[a("div",{staticClass:"col-lg-2 col-md-2 col-sm-2"},[a("div",{staticClass:"form-group"},[t._m(4),t._v(" "),a("datepicker",{attrs:{minimumView:"month",maximumView:"year","input-class":"form-control",format:"yyyy/MM"},model:{value:t.filter_dashboard.selected_month,callback:function(e){t.$set(t.filter_dashboard,"selected_month",e)},expression:"filter_dashboard.selected_month"}})],1)])]:t._e(),t._v(" "),"date_range"==t.filter_dashboard.method?[a("div",{staticClass:"col-lg-2 col-md-2 col-sm-2"},[a("div",{staticClass:"form-group"},[t._m(5),t._v(" "),a("datepicker",{attrs:{minimumView:"date",maximumView:"year","input-class":"form-control",format:"yyyy/MM/dd"},model:{value:t.filter_dashboard.from_date,callback:function(e){t.$set(t.filter_dashboard,"from_date",e)},expression:"filter_dashboard.from_date"}})],1)]),t._v(" "),a("div",{staticClass:"col-lg-2 col-md-2 col-sm-2"},[a("div",{staticClass:"form-group"},[t._m(6),t._v(" "),a("datepicker",{attrs:{minimumView:"date",maximumView:"year","input-class":"form-control",format:"yyyy/MM/dd"},model:{value:t.filter_dashboard.to_date,callback:function(e){t.$set(t.filter_dashboard,"to_date",e)},expression:"filter_dashboard.to_date"}})],1)])]:t._e()],2)])])])])]),t._v(" "),a("div",{staticClass:"row flex-row"},[a("div",{staticClass:"col-xl-4 col-md-6 col-sm-6"},[a("div",{staticClass:"widget widget-12 has-shadow"},[a("div",{staticClass:"widget-body"},[a("div",{staticClass:"media"},[t._m(7),t._v(" "),a("div",{staticClass:"media-body align-self-center"},[a("div",{staticClass:"title"},[t.total_data.drop_point.loading?a("span",[t._v("Calculating...")]):t._e(),t._v(" "),t.total_data.drop_point.loading?t._e():a("span",[t._v(t._s(t.currency(t.total_data.drop_point.data)))])]),t._v(" "),a("div",{staticStyle:{"font-size":"11pt"}},[t._v("\n                                Total Drop Point\n                            ")])])])])])]),t._v(" "),a("div",{staticClass:"col-xl-4 col-md-6 col-sm-6"},[a("div",{staticClass:"widget widget-12 has-shadow"},[a("div",{staticClass:"widget-body"},[a("div",{staticClass:"media"},[t._m(8),t._v(" "),a("div",{staticClass:"media-body align-self-center"},[a("div",{staticClass:"title"},[t.total_data.customers.loading?a("span",[t._v("Calculating...")]):t._e(),t._v(" "),t.total_data.customers.loading?t._e():a("span",[t._v(t._s(t.currency(t.total_data.customers.data)))])]),t._v(" "),a("div",{staticStyle:{"font-size":"11pt"}},[t._v("\n                                Total Customers\n                            ")])])])])])]),t._v(" "),a("div",{staticClass:"col-xl-4 col-md-6 col-sm-6"},[a("div",{staticClass:"widget widget-12 has-shadow"},[a("div",{staticClass:"widget-body"},[a("div",{staticClass:"media"},[t._m(9),t._v(" "),a("div",{staticClass:"media-body align-self-center"},[a("div",{staticClass:"title text-facebook"},[t.total_data.couriers.loading?a("span",[t._v("Calculating...")]):t._e(),t._v(" "),t.total_data.couriers.loading?t._e():a("span",[t._v(t._s(t.currency(t.total_data.couriers.data)))])]),t._v(" "),a("div",{staticStyle:{"font-size":"11pt"}},[t._v("\n                                Total Couriers\n                            ")])])])])])]),t._v(" "),a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"widget has-shadow"},[a("div",{staticClass:"widget-header bordered no-actions"},[a("h4",{staticClass:"float-left"},[t._v("\n                        Booking Statistics |\n                        "),"current_year"==t.filter_dashboard.method||"by_year"==t.filter_dashboard.method?a("small",[t._v(t._s(t.filter_dashboard._selected_year_formatted))]):t._e(),t._v(" "),"by_month"==t.filter_dashboard.method?a("small",[t._v(t._s(t.filter_dashboard._selected_month_format))]):t._e(),t._v(" "),"date_range"==t.filter_dashboard.method?a("small",[t._v(t._s(t.filter_dashboard._from_date_format)+" "),a("small",[t._v("to")]),t._v(" "+t._s(t.filter_dashboard._to_date_format))]):t._e()]),t._v(" "),a("button",{staticClass:"btn btn-info btn-sm float-right",on:{click:function(e){return e.preventDefault(),t.refreshDashboardStatistic()}}},[t._v("Refresh")]),t._v(" "),a("div",{staticClass:"clearfix"})]),t._v(" "),a("div",{staticClass:"widget-body"},[a("h4",[t._v("\n                        Total Booking:  \n                        "),a("small",[t.total_data.bookings.loading?a("span",[t._v("Calculating...")]):t._e(),t._v(" "),t.total_data.bookings.loading?t._e():a("span",[t._v(t._s(t.total_data.bookings.data))])])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header text-dark"},[t._v("\n                                    Summary\n                                ")]),t._v(" "),a("div",{staticClass:"card-body"},["by_year"==t.filter_dashboard.method||"current_year"==t.filter_dashboard.method||"date_range"==t.filter_dashboard.method||"by_month"==t.filter_dashboard.method?a("vue-apex-charts",{attrs:{width:"100%",height:"300",type:"bar",options:t.totalBookingChartOptions,series:t.totalBookingChartSeries}}):t._e()],1)])]),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header text-dark"},[t._v("\n                                    Growth Rate (%)\n                                ")]),t._v(" "),a("div",{staticClass:"card-body"},["by_year"==t.filter_dashboard.method||"current_year"==t.filter_dashboard.method||"date_range"==t.filter_dashboard.method||"by_month"==t.filter_dashboard.method?a("vue-apex-charts",{attrs:{width:"100%",height:"300",type:"area",options:t.growthRateTotalBookingChartOptions,series:t.growthRateTotalBookingChartSeries}}):t._e()],1)])])]),t._v(" "),a("br"),t._v(" "),a("h4",[t._v("Total Charges:  \n                        "),a("small",[t.total_data.bookings.loading?a("span",[t._v("Calculating...")]):t._e(),t._v(" "),t.total_data.bookings.loading?t._e():a("span",[t._v("Rp. "+t._s(t.currency(t.total_data.booking_charges.data)))])])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header text-dark"},[t._v("\n                                    Summary\n                                ")]),t._v(" "),a("div",{staticClass:"card-body"},["by_year"==t.filter_dashboard.method||"current_year"==t.filter_dashboard.method||"date_range"==t.filter_dashboard.method||"by_month"==t.filter_dashboard.method?a("vue-apex-charts",{attrs:{width:"100%",height:"300",type:"bar",options:t.chargesBookingChartOptions,series:t.chargesBookingChartSeries}}):t._e()],1)])]),t._v(" "),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header text-dark"},[t._v("\n                                    Growth Rate (%)\n                                ")]),t._v(" "),a("div",{staticClass:"card-body"},["by_year"==t.filter_dashboard.method||"current_year"==t.filter_dashboard.method||"date_range"==t.filter_dashboard.method||"by_month"==t.filter_dashboard.method?a("vue-apex-charts",{attrs:{width:"100%",height:"300",type:"area",options:t.growthRateChargesBookingChartOptions,series:t.growthRateChargesBookingChartSeries}}):t._e()],1)])])])])])]),t._v(" "),t._m(10),t._v(" "),a("div",{staticClass:"col-xl-6"},[a("div",{staticClass:"widget widget-07 has-shadow"},[t._m(11),t._v(" "),a("div",{staticClass:"table-responsive table-scroll"},[a("table",{staticClass:"table table-hover mb-0"},[t._m(12),t._v(" "),a("tbody",[0==t.recentFeeder.data.length?a("tr",[a("td",{staticClass:"warning text-center",attrs:{colspan:"3"}},[t._v("No New Feeder")])]):t._e(),t._v(" "),t._l(t.recentFeeder.data,function(e){return[a("tr",[a("td",[a("router-link",{attrs:{tag:"a",to:"/internal/feeder-courier/"+e.id}},[t._v(t._s(e.user.name))])],1),t._v(" "),a("td",[t._v(t._s(e.user.phone))]),t._v(" "),a("td",[0==e.active?a("small",{staticClass:"badge-text text-dark warning badge-text-small"},[t._v("Pending")]):t._e(),t._v(" "),1==e.active?a("small",{staticClass:"badge-text success badge-text-small"},[t._v("Active")]):t._e(),t._v(" "),2==e.active?a("small",{staticClass:"badge-text danger badge-text-small"},[t._v("Suspended")]):t._e()])])]}),t._v(" "),a("tr",[a("td",{staticClass:"primary",attrs:{colspan:"3"}},[a("router-link",{staticClass:"btn btn-block btn-primary",attrs:{tag:"button",to:"/internal/feeder-courier"}},[t._v("More")])],1)])],2)])])])]),t._v(" "),a("div",{staticClass:"col-xl-6"},[a("div",{staticClass:"widget widget-07 has-shadow"},[t._m(13),t._v(" "),a("div",{staticClass:"table-responsive table-scroll"},[a("table",{staticClass:"table table-hover mb-0"},[t._m(14),t._v(" "),a("tbody",[0==t.recentCourier.data.length?a("tr",[a("td",{staticClass:"warning text-center",attrs:{colspan:"3"}},[t._v("No New Courier")])]):t._e(),t._v(" "),t._l(t.recentCourier.data,function(e){return[a("tr",[a("td",[a("router-link",{attrs:{tag:"a",to:"/internal/courier/"+e.id}},[t._v(t._s(e.user.name))])],1),t._v(" "),a("td",[t._v(t._s(e.user.phone))]),t._v(" "),a("td",[0==e.active?a("small",{staticClass:"badge-text text-dark warning badge-text-small"},[t._v("Pending")]):t._e(),t._v(" "),1==e.is_active?a("small",{staticClass:"badge-text success badge-text-small"},[t._v("Active")]):t._e(),t._v(" "),2==e.is_active?a("small",{staticClass:"badge-text danger badge-text-small"},[t._v("Suspended")]):t._e()])])]}),t._v(" "),a("tr",[a("td",{staticClass:"primary",attrs:{colspan:"3"}},[a("router-link",{staticClass:"btn btn-block btn-primary",attrs:{tag:"button",to:"/internal/courier"}},[t._v("More")])],1)])],2)])])])])]),t._v(" "),a("div",{staticClass:"clearfix"})])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"page-header-tools"},[e("button",{staticClass:"btn btn-gradient-03 btn-sm",attrs:{"data-toggle":"collapse","data-target":"#filterSection"}},[this._v("\n                              "),e("i",{staticClass:"ion-ios-list-outline"}),this._v(" Filter  \n                        ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"widget-header bordered no-actions"},[e("h4",[this._v("Filter")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("small",[e("label",{attrs:{for:""}},[e("strong",[this._v("Filter Method")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("small",[e("label",{attrs:{for:""}},[this._v("Tahun")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("small",[e("label",{attrs:{for:""}},[this._v("Select Month")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("small",[e("label",{attrs:{for:""}},[this._v("Start Date")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("small",[e("label",{attrs:{for:""}},[this._v("End Date")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"align-self-center ml-5 mr-5"},[e("i",{staticClass:"ion-location"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"align-self-center ml-5 mr-5"},[e("i",{staticClass:"ion-ios-contact"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"align-self-center ml-5 mr-5"},[e("i",{staticClass:"ion-android-walk"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 pb-3"},[e("h3",[this._v("\n                New Request\n            ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"widget-header bordered d-flex align-items-center"},[e("h2",[this._v("New Feeder")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{width:"50%"}},[this._v("Name")]),this._v(" "),e("th",{attrs:{width:"30%"}},[this._v("Phone")]),this._v(" "),e("th",{attrs:{width:"20%"}},[this._v("Status")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"widget-header bordered d-flex align-items-center"},[e("h2",[this._v("New Courier")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{width:"50%"}},[this._v("Name")]),this._v(" "),e("th",{attrs:{width:"30%"}},[this._v("Phone")]),this._v(" "),e("th",{attrs:{width:"20%"}},[this._v("Status")])])])}],!1,null,null,null);e.default=h.exports}}]);