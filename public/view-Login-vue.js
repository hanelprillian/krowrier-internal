(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{n0nz:function(t,n,a){"use strict";a.r(n);var e=a("o0o1"),r=a.n(e);function i(t,n,a,e,r,i,s){try{var o=t[i](s),l=o.value}catch(t){return void a(t)}o.done?n(l):Promise.resolve(l).then(e,r)}function s(t){return function(){var n=this,a=arguments;return new Promise(function(e,r){var s=t.apply(n,a);function o(t){i(s,e,r,o,l,"next",t)}function l(t){i(s,e,r,o,l,"throw",t)}o(void 0)})}}var o={name:"login",data:function(){return{loading:!1,error:!1,email:"",password:""}},methods:{login:function(){var t=s(r.a.mark(function t(){var n=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loading=!0,firebase.auth().signInWithEmailAndPassword(this.email,this.password).then(function(){var t=s(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getLoggedUser();case 2:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}(),function(t){n.loading=!1,n.error=!0,console.log("Oops. "+t.message)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getLoggedUser:function(){var t=s(r.a.mark(function t(){var n,a,e=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,a=firebase.auth().currentUser,t.next=4,db.collection("user").where("user_id","==",a.uid).limit(1).onSnapshot(function(){var t=s(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.empty?n.logout():a.forEach(function(){var t=s(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.data();case 2:(a=t.sent).id=n.id,localStorage.setItem("userLoginData",JSON.stringify(a)),console.log(localStorage.getItem("userLoginData")),e.error=!1,window.location="/internal";case 8:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),logout:function(){firebase.auth().signOut().then(function(){window.IsLogged=!1,self.IsLogged=!1,self.userLogged=[],localStorage.removeItem("userLoginData"),window.location="/internal/auth/login"})}}},l=a("KHd+"),c=Object(l.a)(o,function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"container-fluid no-padding h-100"},[a("div",{staticClass:"row flex-row h-100 bg-white"},[t._m(0),t._v(" "),a("div",{staticClass:"col-11 my-auto no-padding"},[a("div",{staticClass:"authentication-form-2 mx-auto"},[a("div",{staticClass:"tab-content",attrs:{id:"animate-tab-content"}},[a("div",{staticClass:"tab-pane show active",attrs:{role:"tabpanel",id:"singin","aria-labelledby":"singin-tab"}},[a("h3",[t._v("Internal Login")]),t._v(" "),a("br"),t._v(" "),t.error?a("div",{staticClass:"alert alert-outline-danger"},[t._v("Wrong username or password")]):t._e(),t._v(" "),a("br"),t._v(" "),a("form",[a("div",{staticClass:"group material-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text"},domProps:{value:t.email},on:{input:function(n){n.target.composing||(t.email=n.target.value)}}}),t._v(" "),a("span",{staticClass:"highlight"}),t._v(" "),a("span",{staticClass:"bar"}),t._v(" "),a("label",[t._v("Email")])]),t._v(" "),a("div",{staticClass:"group material-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t.password},on:{input:function(n){n.target.composing||(t.password=n.target.value)}}}),t._v(" "),a("span",{staticClass:"highlight"}),t._v(" "),a("span",{staticClass:"bar"}),t._v(" "),a("label",[t._v("Password")])])]),t._v(" "),a("div",{staticClass:"sign-btn text-center"},[a("button",{staticClass:"btn btn-lg btn-gradient-01",attrs:{disabled:""==t.email||""==t.password||t.loading},on:{click:function(n){return t.login()}}},[t._v(t._s(t.loading?"Loading...":"Sign In"))])])])])])])])])},[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"col-1 no-padding"},[n("div",{staticClass:"elisyam-bg background-03"},[n("div",{staticClass:"elisyam-overlay overlay-08"})])])}],!1,null,null,null);n.default=c.exports}}]);